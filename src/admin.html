<!DOCTYPE html>
<html lang="zh-Hans">
<head>
	<meta charset="UTF-8">
	<title>管理页面</title>
</head>

<style>
#upwrap {
	display: flex;
	justify-content: center;
	align-items: center;
	flex-direction: column;
	padding: 20px;
	border-radius: 3px;
	border: 2px dashed #ddd;


}
	
</style>

<body>
	<div id="upwrap">
		<p> 请拖曳或点击按钮 上传文件</p>
		<button id="upbtn">点击上传</button>	
		<p id="info">上传状态：</p>
	</div>
	



	<script src="../node_modules/leancloud-storage/dist/av-min.js"></script>
	<script>
		// var APP_ID = 'VmemRogGRD7PUbg1TLkpxlEj-gzGzoHsz';
		// var APP_KEY = 'w4bA6jXoo0pMT6t47LrdqDSI';

		// AV.init({
		// 	appId: APP_ID,
		// 	appKey: APP_KEY
		// });

		// var TestObject = AV.Object.extend('Song');
		// var testObject = new TestObject();
		// testObject.save({
		// 	name: 'test',
		// 	singer: 'test'
		// }).then(function(object) {
		// 	alert('LeanCloud Rocks!');
		// })
	</script>

	<script src="../node_modules/plupload/js/plupload.full.min.js"></script>
	<script src="../node_modules/qiniu-js/dist/qiniu.min.js"></script>
	<script>
		let $info = document.querySelector("#info")

		var uploader = Qiniu.uploader({
    runtimes: 'html5',          // 上传模式,依次退化
    browse_button: 'upbtn',    // 上传选择的点选按钮，**必需**
   
    uptoken_url: 'http://localhost:8888/uptoken',    // Ajax请求uptoken的Url
    get_new_uptoken: false,   // 是否每次都重新获取新的uptoken
    domain: 'http://plrmljp28.bkt.clouddn.com',  //下载资源时用到

    container: 'upwrap',             // 上传区域 DOM ID
    max_file_size: '40mb',             // 最大文件体积限制
    dragdrop: true,                    // 开启可拖曳上传
    drop_element: 'upwrap',        // 拖曳上传区域元素的 ID
    auto_start: true,                // 选择文件后自动上传
 
    init: {
    	'FilesAdded': function(up, files) {
    		plupload.each(files, function(file) {
                // 文件添加进队列后,处理相关的事情
              });
    	},
    	'BeforeUpload': function(up, file) {
               // 每个文件上传前,处理相关的事情
             },
             'UploadProgress': function(up, file) {
               // 每个文件上传时,处理相关的事情
               $info.textContent = "上传状态：上传中..."
             },
             'FileUploaded': function(up, file, info) {
               // 每个文件上传成功后,处理相关的事情
               $info.textContent = "上传状态：上传成功!"
              
             },
             'Error': function(up, err, errTip) {
               //上传出错时,处理相关的事情
               $info.textContent = "上传状态：上传失败"
             },
             'UploadComplete': function() {
               //队列文件处理完毕后,处理相关的事情
             }  
        }
      })

</script>

</body>
</html>